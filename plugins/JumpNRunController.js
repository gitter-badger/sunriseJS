!function(a){var b=a.$rootScope,c=b.$scope.fn;c.JumpNRunController=function(){return JumpNRunController=function(a){c.Component.call(this),this.config=a},c.Component.extend(JumpNRunController),JumpNRunController.prototype.init=function(){function a(){var a=arguments[0];if(void 0===a||0===a.length){a=[];for(var b=1;b<arguments.length;b++)a.push(arguments[b])}else a instanceof Array||(a=[a]);return a}var b=this,d=this.config||{};d.keys=d.keys||{},d.keys.left=a(d.keys.left,"a","left"),d.keys.right=a(d.keys.right,"d","right"),d.keys.jump=a(d.keys.jump,"w","up","space"),c.controls.onKeyDown("f",function(){window.player.emit("useItem",{})});var e=0,f=!1;this.on("collision",function(a){f=a}),this.on("tick",function(){var a=!1;d.keys.left.forEach(function(b){a=a||c.controls.isKeyPressed(b)});var g=!1;d.keys.right.forEach(function(a){g=g||c.controls.isKeyPressed(a)});var h=!1,i=f!==!1&&1===f.collision.normal.y;if(i&&d.keys.jump.forEach(function(a){h=h||c.controls.isKeyPressed(a)}),a&&!g&&(b.entity.emit("changeAnimation",{animation:"walk_left",restart:!1}),e=-1,c.isSoundPlaying("steps")||c.playSound("steps")),g&&!a&&(b.entity.emit("changeAnimation",{animation:"walk_right",restart:!1}),e=1,c.isSoundPlaying("steps")||c.playSound("steps")),!a&&!g){if(0!==e){var j="stand_";-1===e?j+="left":1===e&&(j+="right"),b.entity.emit("changeAnimation",{animation:j,restart:!1}),e=0}c.isSoundPlaying("steps")&&c.pauseSound("steps")}b.entity.x+=2*e,h?b.entity.emit("setForce",{name:"movement",x:0,y:-250}):b.entity.emit("setForce",{name:"movement",x:0,y:0}),f=!1})},JumpNRunController}(),c.components.add("JumpNRunController",function(a){return new c.JumpNRunController(a)})}($sr=window.$sr=window.$sr||{});
//# sourceMappingURL=../JumpNRunController.js.map